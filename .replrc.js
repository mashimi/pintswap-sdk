var trade = require('./lib/trade');
var { ethers } = require('ethers');

var contract = trade.createContract({
    "givesToken": "0x0000000000000000000000000000000000000000",
    "getsToken": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
    "givesAmount": "0xd529ae9e860000",
    "getsAmount": "0x05f5e100"
}, '0x' + '2'.repeat(40), '0x' + '3'.repeat(40), 1);

var instructions = [ [],
  [ 'pc',
    'returndatasize',
    '0xe4',
    'returndatasize',
    'returndatasize',
    '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
    'gas',
    [ '0xd505accf00000000000000000000000000000000000000000000000000000000',
      '0x0',
      'mstore',
      [ '0xffdd503549c25ac233a58acdc49f22c5c6e2a318', '0x4', 'mstore' ],
      [ [ 'address' ], '0x24', 'mstore' ],
      [ '0x05f5e100',
        '0x44',
        'mstore',
        '0x6438a39b',
        '0x64',
        'mstore',
        '0x1c',
        '0x84',
        'mstore',
        '0x607b5b5d4329d7d47e4bbe2f52a5bea89d22d8b6f0f1d2b70df050f4f8f39e79',
        '0xa4',
        'mstore',
        '0x24b6b2afa64137c1ca65948ef18d4abc1f97af4697f1b331f447fb085a0c8fee',
        '0xc4',
        'mstore' ] ],
    'call',
    [] ],
  [ '0x0',
    '0x0',
    '0x64',
    '0x0',
    '0x0',
    '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',
    'gas',
    [ '0x23b872dd00000000000000000000000000000000000000000000000000000000',
      '0x0',
      'mstore',
      [ '0xffdd503549c25ac233a58acdc49f22c5c6e2a318',
        '0x4',
        'mstore',
        '0x779d9bb1acf14fad38265f94ac95bc85faad37e9',
        '0x24',
        'mstore',
        '0x05f5e100',
        '0x44',
        'mstore' ] ],
    'call',
    [ 'and' ] ],
  [ [ '0x0',
      '0x0',
      '0x64',
      '0x0',
      '0x0',
      '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
      'gas',
      [ '0x23b872dd00000000000000000000000000000000000000000000000000000000',
        '0x0',
        'mstore',
        [ '0x779d9bb1acf14fad38265f94ac95bc85faad37e9', '0x4', 'mstore' ],
        [ [ 'address' ], '0x24', 'mstore' ],
        [ '0xd529ae9e860000', '0x44', 'mstore' ] ],
      'call',
      [ 'and' ] ],
    [ '0x0',
      '0x0',
      '0x0',
      '0x0',
      '0xd529ae9e860000',
      '0xFfdD503549c25AC233A58AcdC49F22C5c6e2a318',
      'gas',
      [],
      'call',
      [ 'and' ] ] ],
  'iszero',
  'failure',
  'jumpi',
  '0x779d9bb1ACf14fAd38265F94Ac95bc85fAaD37E9',
  'selfdestruct',
  [ 'failure', [ '0x0', '0x0', 'revert' ] ] ]
var emasm = require('emasm').emasm;

var data = emasm(instructions);

var provider = new ethers.InfuraProvider('mainnet');

